<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CSVDB</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_CSVDB.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">CSVDB</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Method for handling Database connectivity and queries.
 | Some methods were used and modified according to Chapter 21 of 'Real World Haskell'
 |  by Bryan O'Sullivan, Don Stewart, and John Goerzen.
 | Link :http:/<em>book.realworldhaskell.org</em>read/extended-example-web-client-programming.html</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:connect">connect</a> :: FilePath -&gt; IO Connection</li><li class="src short"><a href="#v:prepDB">prepDB</a> :: IConnection conn =&gt; conn -&gt; IO ()</li><li class="src short"><a href="#v:addStock">addStock</a> :: IConnection conn =&gt; conn -&gt; [<a href="CSVDATA.html#t:Stock">Stock</a>] -&gt; IO ()</li><li class="src short"><a href="#v:addCompanies">addCompanies</a> :: IConnection conn =&gt; conn -&gt; [<a href="CSVDATA.html#t:Company">Company</a>] -&gt; IO ()</li><li class="src short"><a href="#v:addCompany">addCompany</a> :: IConnection conn =&gt; conn -&gt; <a href="CSVDATA.html#t:Company">Company</a> -&gt; IO <a href="CSVDATA.html#t:Company">Company</a></li><li class="src short"><a href="#v:getCompanies">getCompanies</a> :: IConnection conn =&gt; conn -&gt; IO [<a href="CSVDATA.html#t:Company">Company</a>]</li><li class="src short"><a href="#v:removeCompany">removeCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:updateCompany">updateCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:getCompany">getCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO (Maybe <a href="CSVDATA.html#t:Company">Company</a>)</li><li class="src short"><a href="#v:getStock">getStock</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [<a href="CSVDATA.html#t:Stock">Stock</a>]</li><li class="src short"><a href="#v:convStockRow">convStockRow</a> :: [SqlValue] -&gt; <a href="CSVDATA.html#t:Stock">Stock</a></li><li class="src short"><a href="#v:convCompanyRow">convCompanyRow</a> :: [SqlValue] -&gt; <a href="CSVDATA.html#t:Company">Company</a></li><li class="src short"><a href="#v:convStockToList">convStockToList</a> :: <a href="CSVDATA.html#t:Stock">Stock</a> -&gt; [SqlValue]</li><li class="src short"><a href="#v:convCompToList">convCompToList</a> :: <a href="CSVDATA.html#t:Company">Company</a> -&gt; [SqlValue]</li><li class="src short"><a href="#v:priceByComp">priceByComp</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</li><li class="src short"><a href="#v:priceByCompDateRange">priceByCompDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:highestPrice">highestPrice</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</li><li class="src short"><a href="#v:highestPriceDateRange">highestPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:highestPriceAll">highestPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</li><li class="src short"><a href="#v:highestPriceAllDateRange">highestPriceAllDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:cheapestPriceAll">cheapestPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</li><li class="src short"><a href="#v:cheapestPriceAllDateRange">cheapestPriceAllDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:cheapestPrice">cheapestPrice</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</li><li class="src short"><a href="#v:cheapestPriceDateRange">cheapestPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:avgPriceAll">avgPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</li><li class="src short"><a href="#v:avgPriceDateRange">avgPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</li><li class="src short"><a href="#v:estMoneyMade">estMoneyMade</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</li><li class="src short"><a href="#v:avgPriceByMonth">avgPriceByMonth</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</li><li class="src short"><a href="#v:avgPriceByYear">avgPriceByYear</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</li><li class="src short"><a href="#v:printString">printString</a> :: IConnection conn =&gt; conn -&gt; IO String</li><li class="src short"><a href="#v:buildString">buildString</a> :: [<a href="CSVDATA.html#t:Company">Company</a>] -&gt; String</li><li class="src short"><a href="#v:printpbc">printpbc</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:printpbcdr">printpbcdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printcheapest">printcheapest</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:printcheapestdr">printcheapestdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printhighest">printhighest</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:printhighestdr">printhighestdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printhighestpriceall">printhighestpriceall</a> :: IConnection conn =&gt; conn -&gt; IO ()</li><li class="src short"><a href="#v:printhighestalldr">printhighestalldr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printcheapestpriceall">printcheapestpriceall</a> :: IConnection conn =&gt; conn -&gt; IO ()</li><li class="src short"><a href="#v:printcheapestpricealldr">printcheapestpricealldr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printavgall">printavgall</a> :: IConnection conn =&gt; conn -&gt; IO ()</li><li class="src short"><a href="#v:printavgpricedr">printavgpricedr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:printestmoneymade">printestmoneymade</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:printavgpricebymonth">printavgpricebymonth</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:printavgpricebyyear">printavgpricebyyear</a> :: IConnection conn =&gt; conn -&gt; IO ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:connect" class="def">connect</a> :: FilePath -&gt; IO Connection</p><div class="doc"><p>Initialise DB and return database Connection</p></div></div><div class="top"><p class="src"><a name="v:prepDB" class="def">prepDB</a> :: IConnection conn =&gt; conn -&gt; IO ()</p><div class="doc"><p>Prepare the  db for adding two tables.</p><p>two tables are created and data is verified
* C_ID is unique</p></div></div><div class="top"><p class="src"><a name="v:addStock" class="def">addStock</a> :: IConnection conn =&gt; conn -&gt; [<a href="CSVDATA.html#t:Stock">Stock</a>] -&gt; IO ()</p><div class="doc"><p>Adds many stock items to the database.
Each item represents a line from the csv file.
The entire csv file will be represented by many stock items.
Each item also has a key, which represents the company it belongs to </p></div></div><div class="top"><p class="src"><a name="v:addCompanies" class="def">addCompanies</a> :: IConnection conn =&gt; conn -&gt; [<a href="CSVDATA.html#t:Company">Company</a>] -&gt; IO ()</p><div class="doc"><p>Adds many companies to the db
Each company stores it's csv url and a link to it's html page</p></div></div><div class="top"><p class="src"><a name="v:addCompany" class="def">addCompany</a> :: IConnection conn =&gt; conn -&gt; <a href="CSVDATA.html#t:Company">Company</a> -&gt; IO <a href="CSVDATA.html#t:Company">Company</a></p><div class="doc"><p>An attempt to add a new company to the db. </p></div></div><div class="top"><p class="src"><a name="v:getCompanies" class="def">getCompanies</a> :: IConnection conn =&gt; conn -&gt; IO [<a href="CSVDATA.html#t:Company">Company</a>]</p><div class="doc"><p>Gets a list of all companies. </p></div></div><div class="top"><p class="src"><a name="v:removeCompany" class="def">removeCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Remove a Company. This also has to delete any stock which is assosiated with the company. </p></div></div><div class="top"><p class="src"><a name="v:updateCompany" class="def">updateCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; IO ()</p><div class="doc"><p>Updates an existing company. A more current csv link is added
--However all the previous stock relating to the old link is deleted</p></div></div><div class="top"><p class="src"><a name="v:getCompany" class="def">getCompany</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO (Maybe <a href="CSVDATA.html#t:Company">Company</a>)</p><div class="doc"><p>Get a particular Company, by it's id. </p></div></div><div class="top"><p class="src"><a name="v:getStock" class="def">getStock</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [<a href="CSVDATA.html#t:Stock">Stock</a>]</p><div class="doc"><p>Gets stock from one company. The ID is required to return the stock. </p></div></div><div class="top"><p class="src"><a name="v:convStockRow" class="def">convStockRow</a> :: [SqlValue] -&gt; <a href="CSVDATA.html#t:Stock">Stock</a></p><div class="doc"><p>Converts a list of SqlValues to a Stock data type </p></div></div><div class="top"><p class="src"><a name="v:convCompanyRow" class="def">convCompanyRow</a> :: [SqlValue] -&gt; <a href="CSVDATA.html#t:Company">Company</a></p><div class="doc"><p>Converts a list of SqlValues to a Company data type </p></div></div><div class="top"><p class="src"><a name="v:convStockToList" class="def">convStockToList</a> :: <a href="CSVDATA.html#t:Stock">Stock</a> -&gt; [SqlValue]</p><div class="doc"><p>Converts a Stock data type to a list of SqlValues for insertion into the DB. </p></div></div><div class="top"><p class="src"><a name="v:convCompToList" class="def">convCompToList</a> :: <a href="CSVDATA.html#t:Company">Company</a> -&gt; [SqlValue]</p><div class="doc"><p>Converts a Company data type to a list of SqlValues for insertion into the DB. </p></div></div><div class="top"><p class="src"><a name="v:priceByComp" class="def">priceByComp</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</p><div class="doc"><p>Method to print all price closes, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:priceByCompDateRange" class="def">priceByCompDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print all price closes, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:highestPrice" class="def">highestPrice</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</p><div class="doc"><p>Method to print the highest price close, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:highestPriceDateRange" class="def">highestPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print the highest price close, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:highestPriceAll" class="def">highestPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</p><div class="doc"><p>Method to print the highest price close, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:highestPriceAllDateRange" class="def">highestPriceAllDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print the highest price close, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:cheapestPriceAll" class="def">cheapestPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</p><div class="doc"><p>Method to print the lowest price close, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:cheapestPriceAllDateRange" class="def">cheapestPriceAllDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print the lowest price close, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:cheapestPrice" class="def">cheapestPrice</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</p><div class="doc"><p>Method to print the cheapest price close, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:cheapestPriceDateRange" class="def">cheapestPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print the cheapest price close, sorted by price and for one company</p></div></div><div class="top"><p class="src"><a name="v:avgPriceAll" class="def">avgPriceAll</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</p><div class="doc"><p>Method to print the avg price closes, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:avgPriceDateRange" class="def">avgPriceDateRange</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO [[String]]</p><div class="doc"><p>Method to print the avg price closes, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:estMoneyMade" class="def">estMoneyMade</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</p><div class="doc"><p>Method to print the avg price closes, sorted by price and for all companies</p></div></div><div class="top"><p class="src"><a name="v:avgPriceByMonth" class="def">avgPriceByMonth</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO [[String]]</p><div class="doc"><p>Method to print the average prices for each month.</p></div></div><div class="top"><p class="src"><a name="v:avgPriceByYear" class="def">avgPriceByYear</a> :: IConnection conn =&gt; conn -&gt; IO [[String]]</p><div class="doc"><p>Method to print the average prices for each year, for all companies ordered by AverageClose desc.</p></div></div><div class="top"><p class="src"><a name="v:printString" class="def">printString</a> :: IConnection conn =&gt; conn -&gt; IO String</p><div class="doc"><p>Method to print error msg for companies</p></div></div><div class="top"><p class="src"><a name="v:buildString" class="def">buildString</a> :: [<a href="CSVDATA.html#t:Company">Company</a>] -&gt; String</p><div class="doc"><p>Method to build a string with all the current companies in the db. To show the prompt					</p></div></div><div class="top"><p class="src"><a name="v:printpbc" class="def">printpbc</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printpbcdr" class="def">printpbcdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printcheapest" class="def">printcheapest</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Method to display cheapest prices for a company</p></div></div><div class="top"><p class="src"><a name="v:printcheapestdr" class="def">printcheapestdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printhighest" class="def">printhighest</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Method to display highest prices for one company</p></div></div><div class="top"><p class="src"><a name="v:printhighestdr" class="def">printhighestdr</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printhighestpriceall" class="def">printhighestpriceall</a> :: IConnection conn =&gt; conn -&gt; IO ()</p><div class="doc"><p>Method to display highest prices for all companies</p></div></div><div class="top"><p class="src"><a name="v:printhighestalldr" class="def">printhighestalldr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printcheapestpriceall" class="def">printcheapestpriceall</a> :: IConnection conn =&gt; conn -&gt; IO ()</p><div class="doc"><p>Method to display lowest prices for all companies</p></div></div><div class="top"><p class="src"><a name="v:printcheapestpricealldr" class="def">printcheapestpricealldr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printavgall" class="def">printavgall</a> :: IConnection conn =&gt; conn -&gt; IO ()</p><div class="doc"><p>Method to display avg prices for all companies</p></div></div><div class="top"><p class="src"><a name="v:printavgpricedr" class="def">printavgpricedr</a> :: IConnection conn =&gt; conn -&gt; String -&gt; String -&gt; IO ()</p><div class="doc"><p>Method to display prices by company</p></div></div><div class="top"><p class="src"><a name="v:printestmoneymade" class="def">printestmoneymade</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Method to display the moneymade on each day for one company</p></div></div><div class="top"><p class="src"><a name="v:printavgpricebymonth" class="def">printavgpricebymonth</a> :: IConnection conn =&gt; conn -&gt; Int -&gt; IO ()</p><div class="doc"><p>Method to the average close for one company, grouped by month</p></div></div><div class="top"><p class="src"><a name="v:printavgpricebyyear" class="def">printavgpricebyyear</a> :: IConnection conn =&gt; conn -&gt; IO ()</p><div class="doc"><p>Method to the average close for all companies, grouped by year</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>